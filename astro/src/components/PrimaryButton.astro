---
const { variant = "primary", type = "button", href = "", trackingEvent = "" } = Astro.props;
const baseClasses = `px-6 py-3 hover:cursor-pointer ${variant === "primary" ? "bg-custom-pink text-white hover:bg-white hover:text-custom-pink hover:border-custom-pink border border-custom-pink" : "bg-custom-purple text-white hover:bg-white hover:text-custom-purple"} text-md font-semibold inline-block text-center text-decoration-none`;

// Create tracking function that sends to both PostHog and GTM
const getTrackingScript = (eventName: string) => {
  return `if(typeof posthog !== 'undefined'){posthog.capture('${eventName}');}if(typeof gtag !== 'undefined'){gtag('event', '${eventName}');}if(typeof dataLayer !== 'undefined'){dataLayer.push({'event': '${eventName}'});}`;
};
---

{href ? (
  <a 
    href={href} 
    target="_blank" 
    rel="noopener noreferrer"
    class={baseClasses}
    onclick={trackingEvent ? getTrackingScript(trackingEvent) : undefined}
  >
    <slot />
  </a>
) : (
  <button 
    type={type} 
    class={baseClasses}
    onclick={trackingEvent ? getTrackingScript(trackingEvent) : undefined}
  >
    <slot />
  </button>
)}